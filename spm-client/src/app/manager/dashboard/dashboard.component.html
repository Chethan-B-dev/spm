<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
  crossorigin="anonymous"
/>

<div class="row row-height" *ngIf="projects$ | async as projects">
  <!-- project cards -->

  <div class="col-md-9 border-right">
    <div class="container my-3">
      <h4 class="py-2">Projects</h4>
      <app-project-card
        *ngFor="let project of projects"
        [project]="project"
      ></app-project-card>
      <div class="center my-3">
        <button
          *ngIf="loadMoreProjects$ | async"
          mat-button
          color="accent"
          class="content-center"
          (click)="loadMoreProjects()"
        >
          Load More <mat-icon>arrow_downward</mat-icon>
        </button>
      </div>
      <mat-card *ngIf="projects?.length === 0"
        >There are no Projects, Please Add A Project</mat-card
      >
    </div>
  </div>
  <!-- stats -->

  <!-- TODO: toggle button to change status to inprogress for a task-->

  <div class="col-md-3 users">
    <div class="stats container my-3">
      <h4 class="mb-4">Verified Employees</h4>
      <ng-container *ngIf="users$ | async as users">
        <mat-card *ngFor="let user of users" class="my-2">
          <mat-card-header>
            <div
              mat-card-avatar
              [ngStyle]="{
                'background-size': 'cover',
                'background-image': 'url(' + loadImage(user) + ')'
              }"
            ></div>
            <mat-card-title>{{ user.username }}</mat-card-title>
            <mat-card-subtitle>{{ user.email }}</mat-card-subtitle>
          </mat-card-header>
        </mat-card>
        <mat-card *ngIf="users?.length === 0">There are no users</mat-card>
      </ng-container>

      <div class="center my-3">
        <button
          *ngIf="loadMoreUsers$ | async"
          mat-button
          color="primary"
          class="content-center"
          (click)="getMoreUsers()"
        >
          Load More <mat-icon>arrow_downward</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>

<div class="container" *ngIf="errors.length">
  <div class="alert alert-danger" role="alert" *ngFor="let error of errors">
    {{ error }}
  </div>
</div>

<div class="center loading-screen" *ngIf="isLoading$ | async">
  <app-loading-spinner></app-loading-spinner>
</div>
